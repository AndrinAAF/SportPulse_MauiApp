<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SportPulse.Views.FavoritesPage"
             BackgroundColor="#2B2B2B"
             Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="Auto, *" ColumnDefinitions="*">

        <!-- Header / AppBar -->
        <Grid x:Name="HeaderGrid" BackgroundColor="#880A21" Padding="0" ColumnDefinitions="Auto, *" Row="0" HeightRequest="56">
            <Frame Padding="0" HasShadow="False" CornerRadius="6"
                   BackgroundColor="#ffffff22"
                   VerticalOptions="Fill" HorizontalOptions="Start"
                   HeightRequest="{Binding Source={x:Reference HeaderGrid}, Path=Height}">
                <Image Source="icon.png" Aspect="AspectFit" 
                       HeightRequest="{Binding Source={x:Reference HeaderGrid}, Path=Height}"
                       VerticalOptions="Fill" HorizontalOptions="Start"/>
            </Frame>

            <StackLayout Orientation="Horizontal" Spacing="8" HorizontalOptions="EndAndExpand" VerticalOptions="Center" Grid.Column="1" Padding="12,18,12,18">
                <Label Text="Favoriten" TextColor="White" FontSize="18" FontAttributes="Bold" VerticalOptions="Center" />
                <StackLayout Orientation="Horizontal" Spacing="8" VerticalOptions="Center" HorizontalOptions="End">
                </StackLayout>
            </StackLayout>
        </Grid>

        <!-- Content -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="16" Spacing="16">

                <!-- Not Logged In View -->
                <VerticalStackLayout x:Name="NotLoggedInView" 
                                     Spacing="24" 
                                     VerticalOptions="Center"
                                     HorizontalOptions="Center"
                                     Padding="32"
                                     IsVisible="True">
                    
                    <Label Text="🔒" 
                           FontSize="64" 
                           HorizontalOptions="Center"/>
                    
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Anmeldung erforderlich" 
                               TextColor="White" 
                               FontSize="24" 
                               FontAttributes="Bold" 
                               HorizontalOptions="Center"/>
                        
                        <Label Text="Um Favoriten zu speichern und anzuzeigen, musst du dich zuerst anmelden." 
                               TextColor="#CCCCCC" 
                               FontSize="15" 
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"
                               Margin="0,8,0,0"
                               LineHeight="1.4"/>
                    </VerticalStackLayout>
                    
                    <Button Text="Jetzt anmelden" 
                            BackgroundColor="#880A21" 
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="50"
                            WidthRequest="200"
                            FontSize="16"
                            FontAttributes="Bold"
                            Clicked="OnLoginButtonClicked"
                            HorizontalOptions="Center"/>
                    
                </VerticalStackLayout>

                <!-- Logged In View - Favorites -->
                <VerticalStackLayout x:Name="LoggedInView" 
                                     Spacing="16" 
                                     IsVisible="False">
                    
                    <!-- Meine Favoriten Header with Add Button -->
                    <Grid ColumnDefinitions="*,Auto" Margin="0,8,0,0">
                        <Label Text="Meine Favoriten" 
                               TextColor="White" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               VerticalOptions="Center"
                               Grid.Column="0"/>
                        <Button Text="+ Hinzufügen" 
                                BackgroundColor="#880A21" 
                                TextColor="White"
                                CornerRadius="16"
                                Padding="12,6"
                                FontSize="13"
                                Clicked="OnAddFavoriteClicked"
                                Grid.Column="1"/>
                    </Grid>

                    <!-- Favorites Content -->
                    <VerticalStackLayout x:Name="FavoritesContent" Spacing="12">
                        <!-- Favorite items will be populated here -->
                    </VerticalStackLayout>

                    <!-- Personalisierte Ergebnisse Header -->
                    <Label Text="Personalisierte Ergebnisse" 
                           TextColor="White" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           Margin="0,16,0,0"/>

                    <!-- Personalized Results Content -->
                    <VerticalStackLayout x:Name="PersonalizedContent" Spacing="12">
                        <!-- Personalized items will be populated here -->
                    </VerticalStackLayout>

                    <!-- Empty State (when no favorites) -->
                    <VerticalStackLayout x:Name="EmptyFavoritesView" 
                                         Spacing="16" 
                                         VerticalOptions="Center"
                                         HorizontalOptions="Center"
                                         Padding="32"
                                         Margin="0,32,0,0"
                                         IsVisible="False">
                        
                        <Label Text="📋" 
                               FontSize="48" 
                               HorizontalOptions="Center"/>
                        
                        <Label Text="Noch keine Favoriten" 
                               TextColor="White" 
                               FontSize="20" 
                               FontAttributes="Bold" 
                               HorizontalOptions="Center"/>
                        
                        <Label Text="Gehe zur Live-Seite und markiere Spiele oder Teams als Favoriten." 
                               TextColor="#CCCCCC" 
                               FontSize="14" 
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"
                               LineHeight="1.4"/>
                        
                    </VerticalStackLayout>

                </VerticalStackLayout>

                <!-- Spacer for nav bar -->
                <BoxView HeightRequest="56" Color="Transparent"/>

            </VerticalStackLayout>
        </ScrollView>

    </Grid>

</ContentPage>